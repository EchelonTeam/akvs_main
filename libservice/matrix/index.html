<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HEAD>
<TITLE>
</TITLE>
<style type="text/css">
#header_text 
{
	text-align: center;
	 font: 32px serif;
}
p, td, th, input
{
	font: 12px serif;
}
#one 
{
	background-color: RGB(226,197,29);
}
th
{
	background-color: RGB(180,170,170);
}	
#tablemain
{
	border: 4px normal black;
	border-collapse: collapse;
}
td
{
	text-align: center;
}
</style>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<script type="text/javascript" src="data\control.js" ></script>
<script type="text/javascript">
function sIncrease(i, ii) { // По возрастанию
    if (i > ii)
        return 1;
    else if (i < ii)
        return -1;
    else
        return 0;
}

//загрузить скрипт
function loadjscssfile(filename, filetype,idname){
 if (filetype=="js"){ //if filename is a external JavaScript file
  var fileref=document.createElement('script')
  fileref.setAttribute("id",idname);
  fileref.setAttribute("type","text/javascript")
  fileref.setAttribute("src", filename)
 }
 else if (filetype=="css"){ //if filename is an external CSS file
  var fileref=document.createElement("link")
  fileref.setAttribute("rel", "stylesheet")
  fileref.setAttribute("type", "text/css")
  fileref.setAttribute("href", filename)
 }
 if (typeof fileref!="undefined")
  document.getElementsByTagName("head")[0].appendChild(fileref)
}
function removeElement(id)	{
	var Node = document.getElementById(id);
	Node.parentNode.removeChild(Node);
}
// строит матрицу N количество элементов в матрице

function matrix(N_x,N_y,X_START ,Y_START ,ARRAY)
{
	//alert("N_x:"+N_x+"N_y:"+N_y+" X_START:"+X_START+" Y_START:"+Y_START);
	var line_array =new Array();
	for(var i=0;i<ARRAY.length;i++)
	{
		var a=ARRAY[i][0];
		var b=ARRAY[i][1];
		if( (a>=X_START) && (a<(X_START+N_x)) && (b>=(""+Y_START)) && (b<(Y_START+N_y)) )
		{
			line_array.push((a-X_START+(b-Y_START)*N_x));
		}
	}
	//alert(line_array);
	line_array.sort(sIncrease);
	var tmp_x=0;
	var tmp_y=Y_START;
	var w_length=(""+(X_START+N_x)).length;
	var h_length=(""+(Y_START+N_y)).length;
	var next_one=0;
	var pres_poss=0;
	var table_str="<table id='tablemain' border=1 align=\"center\">";
	table_str+="<tr><th name=\"tbtext\" >NN</th>";
	for(var i=X_START;i<(N_x+X_START);i++)
	{
		//распечатываем горизонтальные номера в матрице.
		table_str+="<th name=\"tbtext\">";
		var sstr="";
		//вставка пробелов
		for(var j=0;j<w_length-(""+i).length;j++)
		{
			sstr=sstr+"&nbsp;";	
		}
		table_str+=i+sstr+"</th>";	
	}
	table_str+="</tr>";
	for(var i=0;i<line_array.length;i++)
	{
		next_one=line_array[i]-pres_poss;
		for(;next_one;)
		{
			if(pres_poss%N_x==0 ) 
			{
				tmp_x=0;
				table_str+="</tr>"+"<tr><th name=\"tbtext\">"+tmp_y+"</th>";
				tmp_y++;
			}
			tmp_x++;
			table_str+="<td name=\"tbtext\" TITLE=\"("+(tmp_x-1)+","+(tmp_y-1)+")\">0</td>";
			pres_poss++;
			next_one--;
		}
		//переход на новую строку 
		if(pres_poss%N_x==0 )
		{
			tmp_x=0;
			table_str+="</tr>"+"<tr><th name=\"tbtext\">"+tmp_y+"</th>";
			tmp_y++;
		}
		tmp_x++;
		table_str+="<td name=\"tbtext\" id=\"one\" TITLE=\"("+(tmp_x-1)+","+(tmp_y-1)+")\">1</td>";
		pres_poss++;
	}
	var NN=N_x*N_y;
	for(;pres_poss<NN;)
	{
		if(pres_poss%N_x==0 )
		{
			tmp_x=0;
			table_str+="</tr>"+"<tr><th name=\"tbtext\">"+ tmp_y+"</th>";
			tmp_y++;
		}
		tmp_x++;
		table_str+="<td name=\"tbtext\" TITLE=\"("+(tmp_x-1)+","+(tmp_y-1)+")\">0</td>";
		pres_poss++;
	}
	table_str+="</table>";
	return table_str;
}

function removeElement(id)	{
	var Node = document.getElementById(id);
	if(Node!=null)
	Node.parentNode.removeChild(Node);
}
function deletetable(id)
{
	removeElement(id);	
}
</script>
</head>
<body>
<H3 id="header_text">Отчет связей функций в виде матрицы</h3>
<table id="mega_controller" align="center">
<tr>
	<td>
		<form>
			<table  border=0>
				<tr>
					<td></td>
					<td>
						<input type="button" onclick="onup();" value="вверх"></input>
					</td>
					<td></td>
				</tr>
				<tr>
					<td>
						<input type="button" onclick="onleft();" value="влево"></input>
					</td>
					<td></td>
					<td>
						<input type="button" onclick="onright();" value="вправо"></input>
					</td>
				</tr>
				<tr>
					<td></td>
					<td>
						<input type="button" onclick="ondown();" value=" вниз   "></input>
					</td>
					<td></td>
				</tr>
			</table>
		</form>
	</td><td>
	<table border=0 id="polojenie">
		<tr>
				<td>текущее положение x</td>
				<td>текущее положение y</td>
				<td>Число Файлов по X</td>
				<td>Число Файлов по Y</td>
				
		</tr>
		<tr>
				<td id="pos_x"  >0</td>
				<td id="pos_y"  >0</td>
				<td id="sizex">0</td>
				<td id="sizey">0</td>
		</tr>
	</table>
</td><td>
		<form>
			<table border=0 id="forma1">
				<tr>
					<td>Перейти по X</td>
					<td> Перейти по Y</td>
					<td rowspan=2> <input type="button" onclick="gotojs();" name="go_to_js" value="Перейти" ></input></td>
				</tr>
				<tr>
					<td><input type="text" id="go_to_x_js" value="0"></input></td>
					<td><input type="text" id="go_to_y_js" value="0"></input></td>
				</tr>
			</table>
		</form>
</td><td>
		<form>
			<table border =0 id="forma2">
				<tr>
					<td colspan="2" >Размер матрицы</td>
				</tr>
				<tr>
					<td><input type="button" id="plus" value="+" onclick="plusplus();"></input></td>
					<td><input type="button" id="minux" value="-" onclick="minusminus();"></input></td>
				</tr>
			</table>
		</form>
</td>
</tr>
</table>
<script type="text/javascript">
loadjscssfile("data\\"+arrayfile[0][0], "js","110");
document.getElementById("sizex").firstChild.data=(num_x_file*max_screen_in_file_x);
document.getElementById("sizey").firstChild.data=(num_y_file*max_screen_in_file_y);
//alert("nx="+nx+" ny="+ny);

file_size_x=nx;
file_size_y=ny;
//alert("nx="+nx+" ny="+ny);
</script>
<div id="inserttable">
&nbsp;
</div> 
<script type="text/javascript">
	var x=getX();
 	var table=matrix(screen_size_x,screen_size_y,dx,dy,x);
	document.getElementById("inserttable").innerHTML=table;
	setmatsize();
</script>
</body>
</html>